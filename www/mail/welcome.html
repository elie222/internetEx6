<!DOCTYPE html>
<html>
<head>
    <title>Mail Application Login Screen</title>
    <link rel="stylesheet" type="text/css" href="/mail/stylesheet.css" />
    <link rel="stylesheet" type="text/css" href="/mail/login.css" />
    <script src="/mail/include/jquery.js"></script>
</head>
<body>

<div id="container" class="clientArea">
    <br />
    <div id="errorMessage"> </div>

    <br />


    <div id="loginBox" class="window smallBox">
        <div class="caption">
            Welcome to Mail Application! <br />
            Please login:<br/>
            <br/>
         </div>
        <form id="loginForm" action="login" method="POST">
            <table class="login">
                <tr>
                    <td>Username: </td><td>  <input name="username" /> </td>
                    <td rowspan="2">
                        <input class="button" id="loginButton" type="button"  value="Login" />
                    </td>
                </tr>
                <tr>
                    <td>Password: </td><td><input name="password" type='password'/></td>
                </tr>
            </table>

        </form>
         <input type="button" class="button navigation" value="Go To Register" onclick="buttonPushed('goToRegister');"/>

    </div>

    <div id="registerBox" class="window smallBox" style="display: none;">
        <div class="caption">
            Welcome to Mail Application! <br />
            Registration Form:<br/>
            <br/>
        </div>
        <form id="registerForm" action="register" method="POST">
            <table class="login">
                <tr>
                    <td>Username:</td> <td> <input type="text" name="username"></td>
                </tr>
                <tr>
                    <td>Password:</td> <td> <input type="text" name="password"></td>
                </tr>
                <tr>
                    <td>First Name:</td> <td> <input type="text" name="firstName"></td>
                </tr>
                <tr>
                    <td>Last Name:</td> <td> <input type="text" name="lastName"></td>
                </tr>
                <tr>
                    <td>Age:</td> <td> <input type="text" name="age"></td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: center"><input id="registerButton" type="button" class="button"  value="Register"></td>

                </tr>
            </table>

            <input type="button" class="button navigation"  value="Go To Login" onclick="buttonPushed('goToLogin');"/>


        </form>
            <!--
            Username: <input type="text" name="username"><br>
            Password: <input type="password" name="password"><br>
            First Name: <input type="text" name="firstname"><br>
            Surname: <input type="text" name="surname"><br>
            Age: <input type="text" name="age"><br>
            <input type="submit" value="Register">
        </form>
        <input type="button" value="Go To Login" onclick="buttonPushed('goToLogin');"/>
        -->
    </div>

</div>


<script type="text/javascript">
    function buttonPushed(button) {
        console.log('HERE');
        if (button === 'goToRegister') {
            document.getElementById("loginBox").style.display="none";
            document.getElementById("registerBox").style.display="block";
        } else if (button === 'goToLogin') {
            document.getElementById("registerBox").style.display="none";
            document.getElementById("loginBox").style.display="block";
        } else {
            console.log('not a button name');
        }
    }
</script>

<script type="text/javascript" >

        $(loginButton).click(function () {
            $.post('login',$(loginForm).serialize(),function (data,status) {
                if(status === 'success') {
                    if(data === 'OK') {
                        window.location.href = '/mail/mail.html';
                    }
                    else {
                        $(errorMessage).text('Error: '+data);
                        $(errorMessage).css('background-color','red');
                    }
                }
            });

        });


       $(registerButton).click(function () {
            $.post('register',$(registerForm).serialize(),function (data,status) {
                if(status === 'success') {
                    if(data === 'OK') {
                        window.location.href = '/mail/mail.html';
                    }
                    else {
                        $(errorMessage).text('Error: '+data);
                        $(errorMessage).css('background-color','red');
                    }
                }
            });

        });


</script>

</body>
</html>